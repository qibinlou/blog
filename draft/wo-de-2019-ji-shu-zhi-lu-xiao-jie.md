# 我的2019技术之路小结

时间飞逝，19年即将进入尾声，子曰：温故而知新，作为一个在技术之路上孜孜不倦地奋斗的一线软件工程师，今天就来回顾总结下19年的技术之路，以作承上启下之用。

首先向不甚知情的读者简单介绍下笔者现在的工作：我目前就职于纽约的成长型创业公司Squarespace，公司的主营业务是零代码自主建站（个人网站或电商网站），域名，邮件营销工具。同行业的可参考对比的公司包括Wix\(6B\), Shopify\(45B\), Godaddy\(11B\), MailChimp\(5B估值）。我主要在做电商网站建站那块业务，上至前端的购物车应用、结算应用、商家产品管理、订单管理，下至后端的订单系统和支付系统，都有所涉及。在小公司工作的好处之一就是粥多僧少，只要肯干活有的是项目，能学到的东西自然也就比较多。

19年做的项目基本都是后端的项目，最主要的两个大项目是 1）构建第二代订单系统以提高系统容错性 2）全链路实现Stripe SCA来迎合欧洲新出的关于支付两步验证的法规。

#### 

#### 构建第二代订单系统

在Google Search工作时，我有个印象是比较核心的infra系统基本每过个两三年都要重做一次，因为数据量增长实在太大或者是老系统的性能出现明显业务瓶颈。现在业界很火的一个话题是微服务架构\(Microservices\)，采用这种系统架构的好处很明显，在一个几百个人的工程团队里分工明确，责任明确，开发测试部署效率都比在单体应用时代有了显著的提升（毕竟能做到像Google那样所有人都在google3一个monorepo里写代码并快速部署子系统迭代的公司寥寥无几，对infra的要求太高，小公司没能力也没精力去做\)。但微服务并非万能钥匙，凡事有利必有弊，其中一个大弊端就是整体系统稳定性降低，如果没有做好容错的话，很容易出现单点故障导致线上事故。

在单体应用时代，假设我们只有一个系统X，X的稳定性是99.99%, 也就是说10000分钟里最多宕机1分钟。但在微服务架构下，我们把X拆成了三个各自分工相对松耦合的微服务A, B, C, 三个子系统的稳定性假设也是99.99%， 但从整体来看系统的稳定性变成了 `99.99% * 99.99% * 99.99% = 99.97%`！这里还有个隐藏假设是该系统的功能依赖A, B, C三个系统同时可用。

现在

现在我们来把A, B, C具象化下，场景为电商网站的订单提交请求处理。 

#### 全链路实现Stripe SCA

